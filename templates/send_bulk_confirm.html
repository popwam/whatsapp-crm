<!DOCTYPE html>
<html lang="ar">
  <head>
    <meta charset="UTF-8" />
    <title>ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ</title>
    <style>
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
      }
      th,
      td {
        border: 1px solid #ccc;
        padding: 8px;
        text-align: center;
      }
      th {
        background-color: #f2f2f2;
      }
      button,
      input,
      select {
        margin: 10px 0;
        padding: 8px;
      }
    </style>
  </head>
  <body>
    <h2>ğŸ“¤ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ</h2>

    <form action="/send_bulk" method="post" enctype="multipart/form-data">
      <label>Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø£Ùˆ Ø§Ø³Ù… Ø§Ù„Ù…ØªØºÙŠØ±:</label>
      <input
        type="text"
        name="message"
        id="messageInput"
        placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø¹Ù…ÙŠÙ„Ù†Ø§ Ø§Ù„Ø¹Ø²ÙŠØ²"
      /><br />

      <label>Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„:</label>
      <select name="type" id="type" onchange="toggleImage()">
        <option value="text">Ù†Øµ Ø¹Ø§Ø¯ÙŠ</option>
        <option value="marketing_dee">
          Ù‚Ø§Ù„Ø¨ ØªØ³ÙˆÙŠÙ‚ (marketing_dee)
        </option></select
      ><br />

      <div id="imageDiv" style="display: none">
        <label>ğŸ“· ØµÙˆØ±Ø© Ø§Ù„Ù‚Ø§Ù„Ø¨:</label>
        <input type="file" name="image" />
      </div>

      <label
        ><input type="checkbox" id="selectAll" onclick="toggleAll(this)" />
        ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„</label
      >

      <table>
        <thead>
          <tr>
            <th>Ø§Ø®ØªÙŠØ§Ø±</th>
            <th>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</th>
            <th>Ø§Ù„Ø§Ø³Ù…</th>
          </tr>
        </thead>
        <tbody>
          {% for item in numbers %}
          <tr>
            <td>
              <input
                type="checkbox"
                name="selected_numbers"
                value="{{ item.number }}|{{ item.name }}"
              />
            </td>
            <td>{{ item.number }}</td>
            <td>{{ item.name }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      <button type="submit">ğŸš€ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¢Ù†</button>
    </form>

    <script>
      function toggleAll(source) {
        const checkboxes = document.querySelectorAll(
          "input[name='selected_numbers']"
        );
        checkboxes.forEach((ch) => (ch.checked = source.checked));
      }

      function toggleImage() {
        const type = document.getElementById("type").value;
        const imageDiv = document.getElementById("imageDiv");
        const messageInput = document.getElementById("messageInput");

        if (type === "marketing_dee") {
          imageDiv.style.display = "block";
          messageInput.required = false;
          messageInput.placeholder = "âŒ ØºÙŠØ± Ù…Ø·Ù„ÙˆØ¨ Ù…Ø¹ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨";
        } else {
          imageDiv.style.display = "none";
          messageInput.required = true;
          messageInput.placeholder = "Ù…Ø«Ù„Ø§Ù‹: Ø¹Ù…ÙŠÙ„Ù†Ø§ Ø§Ù„Ø¹Ø²ÙŠØ²";
        }
      }
    </script>
  </body>
</html>
